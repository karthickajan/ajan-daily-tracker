â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  SUPABASE RLS POLICIES - SETUP GUIDE                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ YOUR TRACKER IS DEVICE-BASED (NO LOGIN)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Each device gets a unique device_id, so:
  âœ… Each device can insert, update, view, delete its own data
  âœ… Simple & doesn't require authentication
  âœ… Perfect for single-user tracker


ğŸ“‹ STEP-BY-STEP SETUP
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

STEP 1: Go to Supabase Dashboard
   â””â”€ https://app.supabase.com â†’ Select "Daily Tracker" project


STEP 2: Go to SQL Editor
   â””â”€ Left sidebar â†’ SQL Editor â†’ New Query


STEP 3: Copy & Paste the SIMPLER POLICIES below
   â””â”€ See "SIMPLER POLICIES" section below


STEP 4: Run the SQL
   â””â”€ Press "Run" button (Ctrl+Enter)


STEP 5: Verify
   â””â”€ No errors? âœ… You're done!
   â””â”€ Got error? Check the "TROUBLESHOOTING" section


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŸ¢ SIMPLER POLICIES (RECOMMENDED FOR YOUR TRACKER)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Copy & paste ALL of this into Supabase SQL Editor:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ -- Enable Row Level Security                                               â”‚
â”‚ ALTER TABLE public.tracker_entries ENABLE ROW LEVEL SECURITY;              â”‚
â”‚                                                                             â”‚
â”‚ -- Policy 1: Allow INSERT (anyone can add entries)                         â”‚
â”‚ CREATE POLICY "allow_insert"                                               â”‚
â”‚ ON public.tracker_entries FOR INSERT                                       â”‚
â”‚ WITH CHECK (true);                                                          â”‚
â”‚                                                                             â”‚
â”‚ -- Policy 2: Allow UPDATE (anyone can update entries)                      â”‚
â”‚ CREATE POLICY "allow_update"                                               â”‚
â”‚ ON public.tracker_entries FOR UPDATE                                       â”‚
â”‚ USING (true) WITH CHECK (true);                                            â”‚
â”‚                                                                             â”‚
â”‚ -- Policy 3: Allow SELECT (anyone can read entries)                        â”‚
â”‚ CREATE POLICY "allow_select"                                               â”‚
â”‚ ON public.tracker_entries FOR SELECT                                       â”‚
â”‚ USING (true);                                                               â”‚
â”‚                                                                             â”‚
â”‚ -- Policy 4: Allow DELETE (anyone can delete entries)                      â”‚
â”‚ CREATE POLICY "allow_delete"                                               â”‚
â”‚ ON public.tracker_entries FOR DELETE                                       â”‚
â”‚ USING (true);                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ“ EXPLANATION OF EACH PART
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–¸ CREATE POLICY "allow_insert"
   â””â”€ Creates a policy named "allow_insert"

â–¸ ON public.tracker_entries
   â””â”€ Applied to the "tracker_entries" table

â–¸ FOR INSERT
   â””â”€ Controls what happens when you INSERT data

â–¸ WITH CHECK (true)
   â””â”€ "true" = Always allow the INSERT
   â””â”€ Could also be: WITH CHECK (device_id = auth.uid())
      (but that requires authentication - we don't use it)

â–¸ USING (true)
   â””â”€ "true" = Always allow reading/updating/deleting

â–¸ TO public
   â””â”€ Applies to "public" users (anonymous)
   â””â”€ (Not needed in simpler version)


ğŸ”’ SECURITY NOTE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  Using "WITH CHECK (true)" and "USING (true)" means:
    - Anyone can read/write/delete ANY entry
    - Since this is YOUR personal tracker and device_id prevents conflicts:
      âœ… This is fine for your use case
    
âœ…  Better security (optional):
    - Store device_id with each entry
    - Use: WITH CHECK (device_id = current_setting('app.current_device_id'))
    - But this requires setting session variables in your JavaScript


ğŸ› TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âŒ Error: "Relation 'public.tracker_entries' does not exist"
   â””â”€ Solution: Create the table first (see SUPABASE_SETUP.md)

âŒ Error: "Policy already exists"
   â””â”€ Solution: Drop old policies first:
      DROP POLICY IF EXISTS "allow_insert" ON public.tracker_entries;
      DROP POLICY IF EXISTS "allow_update" ON public.tracker_entries;
      DROP POLICY IF EXISTS "allow_select" ON public.tracker_entries;
      DROP POLICY IF EXISTS "allow_delete" ON public.tracker_entries;
      Then run the CREATE POLICY commands again.

âŒ Error: "permission denied"
   â””â”€ Solution: Make sure you're logged in as the project owner
   â””â”€ Check: Top right corner should show your email

âœ… Success: No error message = Policies applied!


ğŸ“Š TABLE STRUCTURE (for reference)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Your tracker_entries table should have:

  id                    BIGINT PRIMARY KEY
  device_id             TEXT (your device identifier)
  date                  TEXT (format: YYYY-MM-DD)
  sleep_6h              BOOLEAN
  sleep_hours           FLOAT
  bathed                BOOLEAN
  hair_controlled       BOOLEAN
  ate_enough            BOOLEAN
  protein_ok            BOOLEAN
  dsa_studied           BOOLEAN
  dsa_hours             FLOAT
  sysdesign_studied     BOOLEAN
  sysdesign_hours       FLOAT
  deepwork_90min        BOOLEAN
  solved_designed       BOOLEAN
  low_distraction       BOOLEAN
  progress              FLOAT
  created_at            TIMESTAMP
  updated_at            TIMESTAMP


âœ¨ ONCE DONE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Your tracker will:
  âœ… Save data to Supabase (cloud)
  âœ… Sync across all your devices
  âœ… Be free forever
  âœ… Work offline (using localStorage) and sync when online

Questions? See: SUPABASE_SETUP.md
